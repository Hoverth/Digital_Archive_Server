{% extends "base.html" %}

{% load static %}

{% block title %}{% if content %}{{ content.title }}{% else %}Permission Denied{% endif %} - Content Details{% endblock %}

{% block content %}{% if content %}<h1>{{ content.title }}</h1>
<p>
    Content type: {{ content.content_type }} <br/>
    Source URL: {{ content.source_url }} <br/>
    Source ID: {{ content.source_id }} <br/>
    Creators: {% for creator in content.creators.all %}<a href="{% url 'ContentViewer:creator' creator.id %}">{{ creator.name }}</a>,
    {% empty %}<a href="{% url 'ContentViewer:nocreator' %}">No Creators</a>{% endfor %}<br/>
    Tags: {% for tag in content.tags.all %}<a href="{% url 'ContentViewer:tag' tag.id %}">{{ tag.name }}</a>, {% empty %}<a href="{% url 'ContentViewer:notag' %}">No Tags</a>{% endfor %} <br/>
    Seen by: {% for user in content.seen_by.all %}{{ user.username }}, {% empty %}None{% endfor %}<br/>
    Liked by: {% for user in content.liked_by.all %}{{ user.username }}, {% empty %}None{% endfor %} <a href="">Favourite</a><br/>
    Content size: {{ content.content_size }} <br/>
    Content path: {{ content.content_path }} <br/>
    Time Created: {{ content.time_created }} <br/>
    Time Retrieved: {{ content.time_retrieved }}<br/>
    Published on: {{ content.published_date }} <br/>
    Last Modified: {{ content.last_modified_date }} <br/>
    Notes: {{ content.notes }}<br/>
    Content Language: {{ content.language }} <br/>
    Content Copyright: {{ content.copyright }} <br/>
    Related Content: {% for content in content.related_content.all %}<a href="">{{ content.title }}</a>, {% empty %}No Related Content{% endfor %}
</p>
<div class="file-container">
    {% for file in files %}
        <div class="file">
            {% if file.type == "image" %}
                <img class="file-image" src="{% static file.path %}"/>
            {% elif file.type == "video" %}
                <video controls="controls" src="{% static file.path %}" type="{{ file.mime }}" playsinline="playsinline"
                       width="1400">
                    <p>If you are seeing this, the video did not load!</p>
                </video>
            {% elif file.contents %}
                {{ file.contents|safe }}
            {% else %}
                {{file.path}} <br/>
            {% endif %}
        </div>
    {% empty %}
        No viewable files associated with content
    {% endfor %}
</div>
{% else %}
<h1>Access Denied</h1>
<p>You don't have permission to view this content!</p>{% endif %}{% endblock %}